<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "\/"
        },
        "articleSection" : "2016",
        "name" : "OpenStack Mitaka手动安装 - 搭建Controller节点",
        "headline" : "OpenStack Mitaka手动安装 - 搭建Controller节点",
        "description" : "0x02 系统安装 0x03 系统配置和安装必备软件 0x04 安装 Mariadb 和 RabbitMQ 0x05 安装 Keystone 0x06 安装 Glance 0x07 安装 Nova 0x08 安装 Neutron 0x09 安装 Dashboard 0x10 路由配置 前言：我也是个OpenStack新手，搭建纯",
        "inLanguage" : "en",
        "author" : "",
        "creator" : "",
        "publisher": "",
        "accountablePerson" : "",
        "copyrightHolder" : "",
        "copyrightYear" : "2016",
        "datePublished": "2016-09-07 09:55:23 \x2b0000 \x2b0000",
        "dateModified" : "2016-09-07 09:55:23 \x2b0000 \x2b0000",
        "url" : "\/2016\/09\/2016-09-07-openstack-mitakae6898be58aa8e5ae89e8a385-controllere88a82e782b9\/",
        "wordCount" : "5607",
        "keywords" : [ "Blog" ]
    }
    </script>
        
            
                <title>OpenStack Mitaka手动安装 - 搭建Controller节点</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.55.6" />
        


        
            <meta name="author" content="Mr9esx">
        
        
            
                <meta name="description" content="Mr9esx&#39;s Blog">
            
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="OpenStack Mitaka手动安装 - 搭建Controller节点"/>
<meta name="twitter:description" content="0x02 系统安装 0x03 系统配置和安装必备软件 0x04 安装 Mariadb 和 RabbitMQ 0x05 安装 Keystone 0x06 安装 Glance 0x07 安装 Nova 0x08 安装 Neutron 0x09 安装 Dashboard 0x10 路由配置 前言：我也是个OpenStack新手，搭建纯"/>

        <meta property="og:title" content="OpenStack Mitaka手动安装 - 搭建Controller节点" />
<meta property="og:description" content="0x02 系统安装 0x03 系统配置和安装必备软件 0x04 安装 Mariadb 和 RabbitMQ 0x05 安装 Keystone 0x06 安装 Glance 0x07 安装 Nova 0x08 安装 Neutron 0x09 安装 Dashboard 0x10 路由配置 前言：我也是个OpenStack新手，搭建纯" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2016/09/2016-09-07-openstack-mitakae6898be58aa8e5ae89e8a385-controllere88a82e782b9/" />
<meta property="article:published_time" content="2016-09-07T09:55:23&#43;00:00"/>
<meta property="article:modified_time" content="2016-09-07T09:55:23&#43;00:00"/>

        <meta property="og:image" content="//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        
<meta itemprop="name" content="OpenStack Mitaka手动安装 - 搭建Controller节点">
<meta itemprop="description" content="0x02 系统安装 0x03 系统配置和安装必备软件 0x04 安装 Mariadb 和 RabbitMQ 0x05 安装 Keystone 0x06 安装 Glance 0x07 安装 Nova 0x08 安装 Neutron 0x09 安装 Dashboard 0x10 路由配置 前言：我也是个OpenStack新手，搭建纯">


<meta itemprop="datePublished" content="2016-09-07T09:55:23&#43;00:00" />
<meta itemprop="dateModified" content="2016-09-07T09:55:23&#43;00:00" />
<meta itemprop="wordCount" content="5607">



<meta itemprop="keywords" content="" />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
            <link rel="stylesheet" href="/css/academicons.min.css">
        

        
            
                
            
        


  
    
    <link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />
  


      
    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      <h1><a href="/">NERVGEEK</a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/">
                            <i class="">&nbsp;</i>Home
                    </a>
                </li>
            
                <li>
                    <a href="/categories/%E5%BC%80%E5%8F%91-develop/">
                            <i class="">&nbsp;</i>Develop
                    </a>
                </li>
            
                <li>
                    <a href="/travel-list/">
                            <i class="">&nbsp;</i>Travel List
                    </a>
                </li>
            
                <li>
                    <a href="/dream-list/">
                            <i class="">&nbsp;</i>Dream List
                    </a>
                </li>
            
                <li>
                    <a href="https://www.miaoplus.com/">
                            <i class="">&nbsp;</i>Gallery
                    </a>
                </li>
            
                <li>
                    <a href="/about/">
                            <i class="">&nbsp;</i>About Me
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/">
                            <h3>
                                <i class="">&nbsp;</i>Home
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories/%E5%BC%80%E5%8F%91-develop/">
                            <h3>
                                <i class="">&nbsp;</i>Develop
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/travel-list/">
                            <h3>
                                <i class="">&nbsp;</i>Travel List
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/dream-list/">
                            <h3>
                                <i class="">&nbsp;</i>Dream List
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://www.miaoplus.com/">
                            <h3>
                                <i class="">&nbsp;</i>Gallery
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about/">
                            <h3>
                                <i class="">&nbsp;</i>About Me
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/2019/06/golang-interview-question/">Go 面试题</a></h3>
                                
                                <time class="published" datetime=
                                    '2019-06-24'>
                                    June 24, 2019</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/2019/05/2019-05-09-windows-10-e4b88be79a84-go-micro-e5ae89e8a385e7ac94e8aeb0efbc88go-mod-e6a8a1e5bc8fefbc89/">Windows 10 下的 go-micro 安装笔记（go mod 模式）</a></h3>
                                
                                <time class="published" datetime=
                                    '2019-05-09'>
                                    May 9, 2019</time>
                            </header>
                            

                        </article>
                
                        <article class="mini-post">
                            <header>
                                <h3><a href="/2019/04/2019-04-28-windows-10-e5ae89e8a385-golang-grpc/">Windows 10 安装 Golang gRpc</a></h3>
                                
                                <time class="published" datetime=
                                    '2019-04-28'>
                                    April 28, 2019</time>
                            </header>
                            

                        </article>
                

                
                    <a href=
                        
                            /
                        
                        class="button">View more posts</a>
                
            </div>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            

























        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
  <header>
    <div class="title">
        
            <h1><a href="/2016/09/2016-09-07-openstack-mitakae6898be58aa8e5ae89e8a385-controllere88a82e782b9/">OpenStack Mitaka手动安装 - 搭建Controller节点</a></h1>
            
        
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2016-09-07'>
            September 7, 2016</time>
        <span class="author">Mr9esx
        
            <p>12 minute read</p>
        
        
    </div>
</header>


  
    <section id="social-share">
      <ul class="icons">
        

























      </ul>
    </section>
  

  

  <div id="content">
    <nav>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#0x02-系统安装">0x02  系统安装</a></li>
<li><a href="#0x03-系统配置和安装必备软件">0x03  系统配置和安装必备软件</a></li>
<li><a href="#0x04-安装-mariadb-和-rabbitmq">0x04  安装 Mariadb 和 RabbitMQ</a></li>
<li><a href="#0x05-安装-keystone">0x05  安装 Keystone</a></li>
<li><a href="#0x06-安装-glance">0x06  安装 Glance</a></li>
<li><a href="#0x07-安装-nova">0x07  安装 Nova</a></li>
<li><a href="#0x08-安装-neutron">0x08  安装 Neutron</a></li>
<li><a href="#0x09-安装-dashboard">0x09  安装 Dashboard</a></li>
<li><a href="#0x10-路由配置">0x10  路由配置</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>

<p>前言：我也是个OpenStack新手，搭建纯属兴趣，如搭建过程中发生任何问题，望多多交流。如果找到解决方法务必回复在文章底下！</p>

<p><strong>目录</strong></p>

<table >
<tbody >
<tr style="height: 41px;" >

<td style="height: 41px; text-align: center;" >1.  [安装准备](https://www.nervgeek.com/pages/1451.html)
</td>
</tr>
<tr style="height: 41px;" >

<td style="height: 41px; text-align: center;" >2.  [系统安装](https://www.nervgeek.com/pages/1451.html/2)
</td>
</tr>
<tr style="height: 41px;" >

<td style="height: 41px; text-align: center;" >3.  [系统配置和安装必备软件](https://www.nervgeek.com/pages/1451.html/3)
</td>
</tr>
<tr style="height: 41px;" >

<td style="height: 41px; text-align: center;" >4.  [安装 Mariadb 和 RabbitMQ](https://www.nervgeek.com/pages/1451.html/4)
</td>
</tr>
<tr style="height: 41px;" >

<td style="height: 41px; text-align: center;" >5.  [安装 Keystone](https://www.nervgeek.com/pages/1451.html/5)
</td>
</tr>
<tr style="height: 41px;" >

<td style="height: 41px; text-align: center;" >6.  [安装 Glance](https://www.nervgeek.com/pages/1451.html/6)
</td>
</tr>
<tr style="height: 29px;" >

<td style="height: 29px; text-align: center;" >7.  [安装 Nova](https://www.nervgeek.com/pages/1451.html/7)
</td>
</tr>
<tr style="height: 29px;" >

<td style="height: 29px; text-align: center;" >8.  [安装 Neutron](https://www.nervgeek.com/pages/1451.html/8)
</td>
</tr>
<tr style="height: 29px;" >

<td style="height: 29px; text-align: center;" >9.  [安装 Dashboard](https://www.nervgeek.com/pages/1451.html/9)
</td>
</tr>
</tbody>
</table>

<p>0x01  安装准备</p>

<p><strong>环境：</strong>
VMware 12 pro</p>

<table >
<tbody >
<tr >

<td >虚拟机名称
</td>

<td >内存
</td>

<td >CPU核数
</td>
</tr>
<tr >

<td >controller
</td>

<td >2G
</td>

<td >2核
</td>
</tr>
<tr >

<td >硬盘容量
</td>

<td >网卡一
</td>

<td >网卡二
</td>
</tr>
<tr >

<td >40G
</td>

<td >192.168.188.128
</td>

<td >10.0.0.2
</td>
</tr>
</tbody>
</table>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/FPUPSUCLH348334CXBEI9H.png">
![F]PUPSUCLH348334CXBEI9H</a>
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/FPUPSUCLH348334CXBEI9H.png)**详细截图：**">https://www.nervgeek.com/wp-content/uploads/2016/09/FPUPSUCLH348334CXBEI9H.png)**详细截图：**</a>
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/35@2_MMDCDOCC1FJ.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/35@2_MMDCDOCC1FJ.png" alt="3%~5@2_(}(MMD}CDOCC1F%J" />
</a></p>

<p><strong>虚拟机网络设置</strong></p>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/FDEU7ZXCXDZX8N_9G@K.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/FDEU7ZXCXDZX8N_9G@K.png" alt="FD$}EU7ZXCXDZX8(N_{9G@K" />
</a></p>

<p><strong><code>注意点：VMnet8是192.168.188.128所在网卡，VMnet0是10.0.0.2所在网卡！</code></strong>
<!-- more --></p>

<h6 id="0x02-系统安装">0x02  系统安装</h6>

<p><strong>安装步骤：</strong>
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/L2SLN0Q5BH7JDPDDLN8.png">![L2SLN0Q))`5BH7JDPD]DLN8</a>
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/L2SLN0Q5BH7JDPDDLN8.png">https://www.nervgeek.com/wp-content/uploads/2016/09/L2SLN0Q5BH7JDPDDLN8.png</a>)</p>

<p><strong><code>注意点：最小化安装。KDUMP可关可不关。</code></strong></p>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/7T9_5UPZ@14SZPMT3.png">![7T9})]_5}UPZ@1(4(SZPMT3</a>
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/7T9_5UPZ@14SZPMT3.png">https://www.nervgeek.com/wp-content/uploads/2016/09/7T9_5UPZ@14SZPMT3.png</a>)</p>

<p><strong>正在安装，稍等5~10分钟。</strong></p>

<h6 id="0x03-系统配置和安装必备软件">0x03  系统配置和安装必备软件</h6>

<p><strong>1、进入网卡配置文件修改配置：</strong>
<code>注意点：eno16777736是网卡一，eno33554960是网卡二。</code>
<strong>eno16777736：</strong></p>

<pre><code>vi /etc/sysconfig/network-srcipt/ifcfg-eno16777736
</code></pre>

<p>修改补充后：</p>

<pre><code>TYPE=Ethernet
BOOTPROTO=static
IPADDR0=192.168.188.128
GATEWAY0=192.168.188.2
PREFIX0=24
DNS1=114.114.114.114
DEFROUTE=yes
PEERDNS=yes
PEERROUTES=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_PEERDNS=yes
IPV6_PEERROUTES=yes
IPV6_FAILURE_FATAL=no
NAME=eno16777736
UUID=aafee099-3a7e-4945-99bd-40d32eb599a8
DEVICE=eno16777736
ONBOOT=yes
</code></pre>

<p>修改后截图：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/J0DDB_EFZ9L_HF6P_C.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/J0DDB_EFZ9L_HF6P_C.png" alt="J0%DDB_EF}{Z9`L_HF6P~_C" />
</a></p>

<p><strong>eno33554960：</strong></p>

<pre><code>vi /etc/sysconfig/network-srcipt/ifcfg-eno33554960
</code></pre>

<p>根据红字修改补充：</p>

<pre><code>TYPE=Ethernet
BOOTPROTO=static
IPADDR0=10.0.0.2
PREFIX0=24
DEFROUTE=yes
PEERDNS=yes
PEERROUTES=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_PEERDNS=yes
IPV6_PEERROUTES=yes
IPV6_FAILURE_FATAL=no
NAME=eno33554960
UUID=4cd6a251-e417-4416-9967-0326b20ccb9d
DEVICE=eno33554960
ONBOOT=yes
</code></pre>

<p>修改后截图：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/VQLKKZF0BY8ZF9AO8.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/VQLKKZF0BY8ZF9AO8.png" alt="VQLK(KZF0{)BY$8%ZF9AO~8" />
</a></p>

<p><strong>配置完成后执行：</strong></p>

<pre><code>systemctl restart network
</code></pre>

<p><strong>使用Xshell连接CentOS，以便更好地操作。</strong>
[<img src="https://www.nervgeek.com/wp-content/uploads/2016/09/RWW37A4@24VUFNGVDJ.png" alt="RWW}3)7A4@2$4VUF~NGVD[J](https://www.nervgeek.com/wp-content/uploads/2016/09/RWW37A4@24VUFNGVDJ.png)
" /></p>

<p><strong>2、测试网络连通性，安装 <code>net-tools</code> <code>vim</code> <code>wget</code> ：</strong></p>

<pre><code>yum install net-tools vim wget -y
</code></pre>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/QEJNX931@Q3BTAGM43OY.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/QEJNX931@Q3BTAGM43OY.png" alt="QEJNX931@Q3}B${TAGM43OY" />
</a>
<strong>安装完毕用 <code>ifconfig</code> 查看网卡信息：</strong></p>

<pre><code>[root@localhost ~]# ifconfig
eno16777736: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500
 inet 192.168.188.128 netmask 255.255.255.0 broadcast 192.168.188.255
 inet6 fe80::20c:29ff:fefe:6840 prefixlen 64 scopeid 0x20&lt;link&gt;
 ether 00:0c:29:fe:68:40 txqueuelen 1000 (Ethernet)
 RX packets 25075 bytes 34998885 (33.3 MiB)
 RX errors 0 dropped 0 overruns 0 frame 0
 TX packets 10597 bytes 865346 (845.0 KiB)
 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0
eno33554960: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1500
 inet 10.0.0.2 netmask 255.255.255.0 broadcast 10.0.0.255
 inet6 fe80::20c:29ff:fefe:684a prefixlen 64 scopeid 0x20&lt;link&gt;
 ether 00:0c:29:fe:68:4a txqueuelen 1000 (Ethernet)
 RX packets 38794 bytes 2328390 (2.2 MiB)
 RX errors 0 dropped 420 overruns 0 frame 0
 TX packets 7 bytes 528 (528.0 B)
 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0
lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt; mtu 65536
 inet 127.0.0.1 netmask 255.0.0.0
 inet6 ::1 prefixlen 128 scopeid 0x10&lt;host&gt;
 loop txqueuelen 0 (Local Loopback)
 RX packets 4 bytes 352 (352.0 B)
 RX errors 0 dropped 0 overruns 0 frame 0
 TX packets 4 bytes 352 (352.0 B)
 TX errors 0 dropped 0 overruns 0 carrier 0 collisions 0
</code></pre>

<p><strong>3、上传openstack-mitaka，配置openstack本地源并替换阿里云源：</strong>
替换阿里云源：</p>

<pre><code>rm /etc/yum.repos.d/*
/*一直y确认回车*/
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
/*下载后更新yum缓存，需等待一段时间，提示 元数据缓存已建立 即可*/
yum makecache
</code></pre>

<p>将openstack-mitaka源上传至mnt（其他目录例如media也可），并设置openstack源：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/1KNIY5U@@WZBFMZDC_K.png">![%1KN]IY5U@@W%ZBFM(ZDC_K</a>
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/1KNIY5U@@WZBFMZDC_K.png">https://www.nervgeek.com/wp-content/uploads/2016/09/1KNIY5U@@WZBFMZDC_K.png</a>)</p>

<pre><code>vim /etc/yum.repos.d/openstack.repo
</code></pre>

<p>源：</p>

<pre><code>[openstack]
name=openstack
baseurl=file:///mnt/openstack-mitaka
enable=1
gpgcheck=0
</code></pre>

<p><strong>4、设置hostname：</strong></p>

<pre><code>hostnamectl --static set-hostname controller
</code></pre>

<p>[<img src="https://www.nervgeek.com/wp-content/uploads/2016/09/Y4GEKZF_Z_MFX47T6.png" alt=")Y4G`$E[KZF_Z_~MFX4%7T6](https://www.nervgeek.com/wp-content/uploads/2016/09/Y4GEKZF_Z_MFX47T6.png)
" /></p>

<p><strong>5、修改hosts文件：</strong></p>

<pre><code>vim /etc/hosts
</code></pre>

<p>添加以下配置，如有多个compute请加入至hosts中：</p>

<pre><code>192.168.188.128 controller
192.168.188.129 compute
</code></pre>

<p><strong>6、安装NTP同步时间软件：</strong></p>

<pre><code>yum install chrony -y
</code></pre>

<p>配置NTP：</p>

<pre><code>sed -i 's/^restrict default\ nomodify\ notrap\ nopeer\ noquery/restrict\ default\ nomodify\ /' /etc/chrony.conf
sed -i &quot;/^# Please\ consider\ joining\ the\ pool/iserver\ ${HOSTNAME}\ iburst &quot; /etc/chrony.conf
</code></pre>

<p>设置NTP开机启动、启动NTP、查看NTP状态：</p>

<pre><code>systemctl enable chronyd.service
systemctl start chronyd.service
systemctl status chronyd.service
/*active (running)即成功*/
</code></pre>

<p><strong>7、关闭防火墙和关闭 selinux</strong>
关闭防火墙：</p>

<pre><code>systemctl disable firewalld.service
systemctl stop firewalld.service
</code></pre>

<p>关闭selinux：</p>

<pre><code>vim /etc/selinux/config
</code></pre>

<p>修改配置文件：</p>

<pre><code>SELINUX=disabled
</code></pre>

<p>**8、更新系统：
**</p>

<pre><code>yum update -y
</code></pre>

<p><strong>更新完毕后重启系统。（顺便做个快照）</strong></p>

<h6 id="0x04-安装-mariadb-和-rabbitmq">0x04  安装 Mariadb 和 RabbitMQ</h6>

<p>**1、安装 python-openstackclient 和 openstack-selinux
**</p>

<pre><code>yum install -y python-openstackclient openstack-selinux
</code></pre>

<p><strong>2、安装 Mariadb 数据库</strong></p>

<pre><code>yum install -y mariadb mariadb-server python2-PyMySQL
</code></pre>

<p><strong>3、配置 Mariadb</strong></p>

<pre><code>vim /etc/my.cnf.d/mariadb_oepnstack.cnf
</code></pre>

<p>输入：</p>

<pre><code>[mysqld]
default-storage-engine = innodb
innodb_file_per_table
collation-server = utf8_general_ci
init-connect = 'SET NAMES utf8'
character-set-server = utf8
bind-address = 192.168.188.128
</code></pre>

<p>配置Mariadb数据库开机启动，启动Mariadb数据库并查看状态：</p>

<pre><code>systemctl enable mariadb.service
systemctl restart mariadb.service
systemctl status mariadb.service
</code></pre>

<p><strong>4、设置 Mariadb 登录密码</strong></p>

<pre><code>mysql_secure_installation
</code></pre>

<p>先按下回车，接着按y回车，然后就是设置密码，设置完毕后一直按y直到结束。
我这里把密码设置为 <strong><code>123456</code></strong> 。登录数据库测试：</p>

<pre><code>mysql -uroot -p123456
</code></pre>

<p>进入即成功。
<strong>5、安装 rabbitmq-server</strong></p>

<pre><code>yum install -y rabbitmq-server
</code></pre>

<p><strong>6、设置 RabbitMQ开机启动，开启 RabbitMQ 和查看状态，并查看监听端口</strong></p>

<pre><code>systemctl enable rabbitmq-server.service
systemctl restart rabbitmq-server.service
systemctl status rabbitmq-server.service
</code></pre>

<p>查看监听端口：</p>

<pre><code>netstat -ntlp | grep 5672
</code></pre>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/75W9HST7_UOJX6WYL4I.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/75W9HST7_UOJX6WYL4I.png" alt="{$75W9%HST7_UOJX6WYL4$I" />
</a>
<strong>7、在 RabbitMQ 上创建 openstack 用户和设置密码（123456），并给 openstack 用户赋予权限</strong></p>

<pre><code>rabbitmqctl add_user openstack 123456





rabbitmqctl set_permissions openstack &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;
</code></pre>

<p>执行截图：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/1JI4QE7572OMUAIPY.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/1JI4QE7572OMUAIPY.png" alt="[1(JI4QE]~$7572OMUAI$PY" />
</a>
<strong>8、查看 RabbitMQ 插件并启动 RabbitMQ 相关插件</strong>
查看插件：</p>

<pre><code>/usr/lib/rabbitmq/bin/rabbitmq-plugins list
</code></pre>

<p>执行截图：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/NH7JDPJT4ZV63RAB7K7.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/NH7JDPJT4ZV63RAB7K7.png" alt="NH7~JDPJT)4ZV63R{A~B7K7" />
</a>
启动插件：</p>

<pre><code>/usr/lib/rabbitmq/bin/rabbitmq-plugins enable rabbitmq_management
</code></pre>

<p>执行截图：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/PW9NGJQHFTJ2JNLC2X8.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/PW9NGJQHFTJ2JNLC2X8.png" alt="$PW9`NG)JQHFTJ2JNL(C2X8" />
</a>
<strong>9、浏览器访问 RabbitMQ Web 界面</strong>
先重启一下RabbitMQ：</p>

<pre><code>systemctl restart rabbitmq-server.service
</code></pre>

<p>在浏览器输入 <code>http://192.168.188.128:15672</code> ，帐号密码皆为 <code>guest</code>
访问结果：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/3M15BJV3U6H6G9CJF.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/3M15BJV3U6H6G9CJF.png" alt="{3M15BJV3[U6}H6$G9](CJF" />
</a>
<strong>10、安装 Memcached 缓存</strong>
安装 memcached：</p>

<pre><code>yum install memcached python-memcached -y
</code></pre>

<p>重启 memcached 服务：</p>

<pre><code>systemctl enable memcached.service
systemctl restart memcached.service
</code></pre>

<h6 id="0x05-安装-keystone">0x05  安装 Keystone</h6>

<p><strong>1、创建 Keystone 数据库，并创建数据库用户以及赋予权限</strong>
密码为 <code>123456</code></p>

<pre><code>mysql -uroot -p123456 -e &quot;CREATE DATABASE keystone;&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'localhost' IDENTIFIED BY '123456';&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON keystone.* TO 'keystone'@'%' IDENTIFIED BY '123456';&quot;
</code></pre>

<p><strong>2、安装 Keystone，设置开机启动并启动 Keystone</strong></p>

<pre><code>yum install -y openstack-keystone httpd mod_wsgi memcached python-memcached
</code></pre>

<p><strong>3、设置 memcached 开机启动，并启动 memcached 和查看状态</strong></p>

<pre><code>systemctl enable memcached.service
systemctl restart memcached.service
systemctl status memcached.service
</code></pre>

<p><strong>4、安装 openstack 文件配置工具</strong></p>

<pre><code>yum install -y openstack-utils
</code></pre>

<p><strong>5、生成TOKEN</strong></p>

<pre><code>ADMIN_TOKEN=ADMIN
</code></pre>

<p>ADMIN只是我随便输入而已，可以替换成任何字符串。
<strong>6、配置 keystone</strong>
密码为 <code>123456</code></p>

<pre><code>openstack-config --set /etc/keystone/keystone.conf DEFAULT admin_token $ADMIN_TOKEN
openstack-config --set /etc/keystone/keystone.conf database connection mysql://keystone:123456@$HOSTNAME/keystone
openstack-config --set /etc/keystone/keystone.conf token provider fernet
</code></pre>

<p>注意红字为数据库密码。
<strong>7、同步 Keystone 数据库</strong></p>

<pre><code>su -s /bin/sh -c &quot;keystone-manage db_sync&quot; keystone
</code></pre>

<p>无信息返回则成功。
<strong>8、初始化 fernet 密钥（用于认证，也有其他认证方式）</strong></p>

<pre><code>keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone
</code></pre>

<p>无信息返回则成功。
<strong>9、配置 httpd 并 创建 /etc/httpd/conf.d/wsgi-keystone.conf 配置文件</strong></p>

<pre><code>sed -i &quot;s/#ServerName www.example.com:80/ServerName ${HOSTNAME}/&quot; /etc/httpd/conf/httpd.conf
</code></pre>

<p>创建 /etc/httpd/conf.d/wsgi-keystone.conf 配置文件：</p>

<pre><code>vim /etc/httpd/conf.d/wsgi-keystone.conf
</code></pre>

<p><strong>因为wordpress会对&rsquo;&lt;&lsquo;、&rsquo;&gt;&lsquo;等符号进行编码且配置代码过长，所以提供配置文件下载</strong>：<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/wsgi-keystone.conf_.txt">wsgi-keystone.conf
</a>
<strong>10、设置 httpd 开机启动，并启动 httpd 和查看状态</strong></p>

<pre><code>systemctl enable httpd.service
systemctl restart httpd.service
systemctl status httpd.service
</code></pre>

<p><strong>11、设置环境变量</strong></p>

<pre><code>export OS_TOKEN=ADMIN
export OS_URL=http://${HOSTNAME}:35357/v3
export OS_IDENTITY_API_VERSION=3
</code></pre>

<p><strong>OS_TOKEN和之前ADMIN_TOKEN一致。</strong>
<strong>12、创建 Keystone 服务以及创建 endpoint</strong>
<strong>创建 Keystone 服务：</strong></p>

<pre><code>openstack service create --name keystone --description &quot;OpenStack Identity&quot; identity
</code></pre>

<p>执行截图：
[![4CK9MPHGZD@1]FXV9N5UO]8](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/4CK9MPHGZD@1FXV9N5UO8.png">https://www.nervgeek.com/wp-content/uploads/2016/09/4CK9MPHGZD@1FXV9N5UO8.png</a>)
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/4CK9MPHGZD@1FXV9N5UO8.png">https://www.nervgeek.com/wp-content/uploads/2016/09/4CK9MPHGZD@1FXV9N5UO8.png</a>)
<strong>创建 endpoint ：</strong></p>

<p><strong>Region</strong> 相当于一个区域，每个 <strong>Region</strong> 之间完全隔离，每个 <strong>Region</strong> 都可以有自己的 <strong>endpoint</strong> 。但每个 <strong>Region</strong> 都使用同一个 <strong>Keystone</strong> 和 <strong>Dashboard</strong> 进行管理。 <code>RegionOne</code> 是 <strong>OpenStack</strong> 默认的 <strong>Region</strong> 。</p>

<pre><code>openstack endpoint create --region RegionOne identity public http://${HOSTNAME}:5000/v3
openstack endpoint create --region RegionOne identity internal http://${HOSTNAME}:5000/v3
openstack endpoint create --region RegionOne identity admin http://${HOSTNAME}:35357/v3
</code></pre>

<p>执行截图：
[<img src="https://www.nervgeek.com/wp-content/uploads/2016/09/1RQ193OD4P5N7PLP0.png" alt="1RQ19$3%~O([D4P5N7P}LP0](https://www.nervgeek.com/wp-content/uploads/2016/09/1RQ193OD4P5N7PLP0.png)
" />
<strong>13、创建 admin 项目、admin 用户以及给 admin 用户赋予 admin 角色</strong>
<strong>创建 admin 项目：</strong></p>

<pre><code>openstack domain create --description &quot;Default Domain&quot; default
openstack project create --domain default --description &quot;Admin Project&quot; admin
</code></pre>

<p>执行截图：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/M2VN0KBGCHFWX8EM867BE7.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/M2VN0KBGCHFWX8EM867BE7.png" alt="M2`VN0KBGCHFWX8EM867BE7" />
</a>
<strong>创建 admin 用户：</strong>
密码为 <code>123456</code></p>

<pre><code>openstack user create --domain default admin --password 123456
</code></pre>

<p>执行截图：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/TGOFK0AO9QCX@Q9XC6HE9.png">![TGOFK0AO9QC]X%@Q9XC6HE9</a>
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/TGOFK0AO9QCX@Q9XC6HE9.png">https://www.nervgeek.com/wp-content/uploads/2016/09/TGOFK0AO9QCX@Q9XC6HE9.png</a>)
<strong>给 admin 用户赋予 admin 角色：</strong></p>

<pre><code>openstack role create admin
openstack role add --project admin --user admin admin
</code></pre>

<p>执行截图：
[![ES_])C{_H0KRA]$3_0U2W{E](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/ES_C_H0KRA3_0U2WE.png">https://www.nervgeek.com/wp-content/uploads/2016/09/ES_C_H0KRA3_0U2WE.png</a>)
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/ES_C_H0KRA3_0U2WE.png">https://www.nervgeek.com/wp-content/uploads/2016/09/ES_C_H0KRA3_0U2WE.png</a>)
<strong>14、创建 service 项目</strong></p>

<pre><code>openstack project create --domain default --description &quot;Service Project&quot; service
</code></pre>

<p>实际执行：
[<img src="https://www.nervgeek.com/wp-content/uploads/2016/09/8U00N532YW4O1MNRR6.png" alt="8U%00N%5)32}YW4O1[MNRR6](https://www.nervgeek.com/wp-content/uploads/2016/09/8U00N532YW4O1MNRR6.png)
" />
<strong>15、创建 demo 项目 和 创建 demo 用户</strong>
密码为 <code>123456</code></p>

<pre><code>openstack project create --domain default --description &quot;Demo Project&quot; demo
openstack user create --domain default demo --password 123456
</code></pre>

<p>实际执行：
[![11HB5QX2S%HR2%]5]WW)48W](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/11HB5QX2SHR25WW48W.png">https://www.nervgeek.com/wp-content/uploads/2016/09/11HB5QX2SHR25WW48W.png</a>)
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/11HB5QX2SHR25WW48W.png">https://www.nervgeek.com/wp-content/uploads/2016/09/11HB5QX2SHR25WW48W.png</a>)
<strong>16、创建 user 角色并给 demo 用户赋予 user 角色</strong></p>

<pre><code>openstack role create user
openstack role add --project demo --user demo user
</code></pre>

<p>实际执行：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/XCWLXVDGZ5J50LR4TO.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/XCWLXVDGZ5J50LR4TO.png" alt="X}CWLXVD~G`Z5J50~LR4`TO" />
</a>
<strong>17、验证 keystone</strong>
密码为 <code>123456</code></p>

<pre><code>unset OS_TOKEN OS_URL
openstack --os-auth-url http://controller:35357/v3 --os-project-domain-name default \
--os-user-domain-name default --os-project-name admin --os-username admin token issue --os-password 123456
openstack --os-auth-url http://controller:5000/v3 --os-project-domain-name default \
--os-user-domain-name default --os-project-name demo --os-username demo token issue --os-password 123456
</code></pre>

<p>实际执行：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/20HZQA9YGXH29T753J0.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/20HZQA9YGXH29T753J0.png" alt="20HZ(}`QA9YG`XH29T753J0" />
</a></p>

<p><strong>18、创建 admin 用户变量脚本文件、demo 用户变量脚本文件</strong>
变量脚本最常用于当服务器重启后，执行openstack命令时报错。
我习惯保存在root目录下。
<strong>admin-openrc.sh：</strong></p>

<pre><code>vim ~/admin-openrc.sh
</code></pre>

<p>输入：
密码为 <code>123456</code></p>

<pre><code>export OS_PROJECT_DOMAIN_NAME=default
export OS_USER_DOMAIN_NAME=default
export OS_PROJECT_NAME=admin
export OS_USERNAME=admin
export OS_AUTH_URL=http://${HOSTNAME}:35357/v3
export OS_IDENTITY_API_VERSION=3
export OS_PASSWORD=123456
</code></pre>

<p><strong>demo-openrc.sh：</strong></p>

<pre><code>vim ~/demo-openrc.sh
</code></pre>

<p>输入：
密码为 <code>123456</code></p>

<pre><code>export OS_PROJECT_DOMAIN_NAME=default
export OS_USER_DOMAIN_NAME=default
export OS_PROJECT_NAME=demo
export OS_USERNAME=demo
export OS_AUTH_URL=http://${HOSTNAME}:5000/v3
export OS_IDENTITY_API_VERSION=3
export OS_PASSWORD=123456
</code></pre>

<p><strong>最后检查：</strong></p>

<pre><code>[root@controller ~]# openstack user list
+----------------------------------+-------+
| ID                               | Name  |
+----------------------------------+-------+
| a0775b2582b24d85a2f0b0fb9c7cb471 | admin |
| b196be66c67a4347abdc62d4799029e7 | demo  |
+----------------------------------+-------+
[root@controller ~]# openstack service list
+----------------------------------+----------+----------+
| ID                               |   Name   |   Type   |
+----------------------------------+----------+----------+
| 4d591f92632f45fbaed1b785b33dfd86 | keystone | identity |
+----------------------------------+----------+----------+
[root@controller ~]# openstack role list
+----------------------------------+-------+
| ID                               | Name  |
+----------------------------------+-------+
| 00287d12a61f44b9900f34fc82ac6e5e | admin |
| a71949c9e4f74a4e9edc54fb958ea6a5 | user  |
+----------------------------------+-------+
[root@controller ~]# openstack domain list
+----------------------------------+---------+---------+----------------+
| ID                               |   Name  | Enabled |  Description   |
+----------------------------------+---------+---------+----------------+
| 46785d4eb28741aa883027ba88a8f6f2 | default |   True  | Default Domain |
+----------------------------------+---------+---------+----------------+
[root@controller ~]# openstack endpoint list
+----------------------------------+-----------+--------------+--------------+---------+-----------+----------------------------+
| ID                               | Region    | Service Name | Service Type | Enabled | Interface | URL                        |
+----------------------------------+-----------+--------------+--------------+---------+-----------+----------------------------+
| 08bb0dc1e35b4acdb4495a36a8f1e1cc | RegionOne | keystone     |   identity   |  True   | public    | http://controller:5000/v3  |
| 2b741d67267a4bc29ee20bdc3e6fd76b | RegionOne | keystone     |   identity   |  True   | internal  | http://controller:5000/v3  |
| 457a01e3ed28415f82b6b042d9bf38bc | RegionOne | keystone     |   identity   |  True   | admin     | http://controller:35357/v3 |
+----------------------------------+-----------+--------------+--------------+---------+-----------+----------------------------+
[root@controller ~]# openstack project list
+----------------------------------+---------+
| ID                               |  Name   |
+----------------------------------+---------+
| 81e04b79a54d454aa524ac4cd726dadf | admin   |
| b5a3180c070a45dcaa343baa24be4509 | service |
| c9bb3205d20442d8bfdf8541ec795fff | demo    |
+----------------------------------+---------+
</code></pre>

<h6 id="0x06-安装-glance">0x06  安装 Glance</h6>

<p><strong>1、创建 Glance 数据库，并创建数据库用户以及赋予权限</strong>
密码为 <code>123456</code></p>

<pre><code>mysql -uroot -p123456 -e &quot;CREATE DATABASE glance;&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' IDENTIFIED BY '123456';&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' IDENTIFIED BY '123456';&quot;
</code></pre>

<p><strong>2、创建 glance 用户并赋予 admin 权限</strong>
先执行环境变量脚本：</p>

<pre><code>source ~/admin-openrc.sh
</code></pre>

<p>密码为 <code>123456</code></p>

<pre><code>openstack user create --domain default glance --password 123456
openstack role add --project service --user glance admin
</code></pre>

<p>实际执行：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/E29NYD60UBSCRUL7E4M5.png">![E29NY{D60UB{SCR]UL7E4M5</a>
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/E29NYD60UBSCRUL7E4M5.png">https://www.nervgeek.com/wp-content/uploads/2016/09/E29NYD60UBSCRUL7E4M5.png</a>)
<strong>3、创建 image 服务，创建 glance 的 endpoint</strong>
<strong>创建 image 服务：</strong></p>

<pre><code>openstack service create --name glance --description &quot;OpenStack Image service&quot; image
</code></pre>

<p>实际执行：
[<img src="https://www.nervgeek.com/wp-content/uploads/2016/09/QQW0IXADK9X3KQK6L.png" alt="Q(QW0IXADK9X3K([QK$%6~L](https://www.nervgeek.com/wp-content/uploads/2016/09/QQW0IXADK9X3KQK6L.png)
" />
<strong>创建 glance 的 endpoint：</strong></p>

<pre><code>openstack endpoint create --region RegionOne image public http://${HOSTNAME}:9292
openstack endpoint create --region RegionOne image internal http://${HOSTNAME}:9292
openstack endpoint create --region RegionOne image admin http://${HOSTNAME}:9292
</code></pre>

<p>实际执行：
[![]R7IS0]65`L<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/R7IS065LW40YP_YGRQ5.png">W40YP_YGRQ5</a>
](<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/R7IS065LW40YP_YGRQ5.png">https://www.nervgeek.com/wp-content/uploads/2016/09/R7IS065LW40YP_YGRQ5.png</a>)
<strong>4、安装 glance</strong></p>

<pre><code>yum install -y openstack-glance python-glance python-glanceclient
</code></pre>

<p><strong>5、配置 glance</strong>
<strong>5.1、配置glance_api.conf</strong>
密码为 <code>123456</code></p>

<pre><code>openstack-config --set /etc/glance/glance-api.conf database connection mysql+pymysql://glance:123456@${HOSTNAME}/glance
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_uri http://${HOSTNAME}:5000
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_url http://${HOSTNAME}:35357
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken memcached_servers ${HOSTNAME}:11211
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken auth_type password
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_domain_name default
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken user_domain_name default
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken username glance
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken password 123456
openstack-config --set /etc/glance/glance-api.conf keystone_authtoken project_name service
openstack-config --set /etc/glance/glance-api.conf paste_deploy flavor keystone
openstack-config --set /etc/glance/glance-api.conf glance_store stores file,http
openstack-config --set /etc/glance/glance-api.conf glance_store default_store file
openstack-config --set /etc/glance/glance-api.conf glance_store filesystem_store_datadir /var/lib/glance/images/
</code></pre>

<p><strong>5.2、配置glance_registry.conf </strong>
密码为 <code>123456</code></p>

<pre><code>openstack-config --set /etc/glance/glance-registry.conf database connection mysql+pymysql://glance:123456@${HOSTNAME}/glance
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_uri http://${HOSTNAME}:5000
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_url http://${HOSTNAME}:35357
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken memcached_servers ${HOSTNAME}:11211
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken auth_type password
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_domain_name default
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken user_domain_name default
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken username glance
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken password 123456
openstack-config --set /etc/glance/glance-registry.conf keystone_authtoken project_name service
openstack-config --set /etc/glance/glance-registry.conf paste_deploy flavor keystone
</code></pre>

<p><strong>6、同步 glance 数据库</strong></p>

<pre><code>su -s /bin/sh -c &quot;glance-manage db_sync&quot; glance
</code></pre>

<p>以下信息不是报错：</p>

<pre><code>Option &quot;verbose&quot; from group &quot;DEFAULT&quot; is deprecated for removal. Its value may be silently ignored in the future.
/usr/lib/python2.7/site-packages/oslo_db/sqlalchemy/enginefacade.py:1056: OsloDBDeprecationWarning: EngineFacade is deprecated; please use oslo_db.sqlalchemy.enginefacade
 expire_on_commit=expire_on_commit, _conf=conf)
</code></pre>

<p><strong>7、配置 glance 开机启动，启动 glance 并查看状态</strong></p>

<pre><code>systemctl enable openstack-glance-api.service openstack-glance-registry.service
systemctl restart openstack-glance-api.service openstack-glance-registry.service
systemctl status openstack-glance-api.service openstack-glance-registry.service
</code></pre>

<p><strong>8、将 glance 版本号写入至环境变量文件中</strong></p>

<pre><code>echo &quot;&quot; &gt;&gt; /root/admin-openrc.sh &amp;&amp; echo &quot;&quot; &gt;&gt; /root/demo-openrc.sh \
&amp;&amp; echo &quot;export OS_IMAGE_API_VERSION=2&quot; | tee -a /root/admin-openrc.sh /root/demo-openrc.sh
</code></pre>

<p><strong>9、下载测试镜像并上传镜像到 glance</strong>
下载镜像：</p>

<pre><code>wget http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img
</code></pre>

<p>上传镜像：</p>

<pre><code>glance image-create --name &quot;cirros-0.3.4-x86_64&quot; --file cirros-0.3.4-x86_64-disk.img \
--disk-format qcow2 --container-format bare --visibility public --progress
</code></pre>

<p>如果上传出现<strong>403</strong>，极有可能是上面的 5.1 、 5.2 配置敲错。如出现<strong>503</strong>错误，请用 <code>openstack user list</code> 等命令检查是否成功创建 glance 用户并赋予相应权限。
查看镜像：</p>

<pre><code>glance image-list
</code></pre>

<h6 id="0x07-安装-nova">0x07  安装 Nova</h6>

<p><strong>1、创建 Nova 数据库，并创建数据库用户以及赋予权限</strong></p>

<pre><code>mysql -uroot -p123456 -e &quot;CREATE DATABASE nova;&quot;
mysql -uroot -p123456 -e &quot;CREATE DATABASE nova_api;&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'localhost' IDENTIFIED BY '123456';&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON nova.* TO 'nova'@'%' IDENTIFIED BY '123456';&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'localhost' IDENTIFIED BY '123456';&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON nova_api.* TO 'nova'@'%' IDENTIFIED BY '123456';&quot;
</code></pre>

<p><strong>2、创建 nova 用户以及赋予 admin 权限</strong>
先导入 admin-openrc.sh 环境变量脚本</p>

<pre><code>source /root/admin-openrc.sh
openstack user create --domain default nova --password 123456
openstack role add --project service --user nova admin
</code></pre>

<p><strong>3、创建 computer 服务</strong></p>

<pre><code>openstack service create --name nova --description &quot;OpenStack Compute&quot; compute
</code></pre>

<p><strong>4、创建 nova 的 endpoint</strong></p>

<pre><code>openstack endpoint create --region RegionOne compute public http://${HOSTNAME}:8774/v2.1/%\(tenant_id\)s
openstack endpoint create --region RegionOne compute internal http://${HOSTNAME}:8774/v2.1/%\(tenant_id\)s
openstack endpoint create --region RegionOne compute admin http://${HOSTNAME}:8774/v2.1/%\(tenant_id\)s
</code></pre>

<p><strong>5、安装 nova 等组件</strong></p>

<pre><code>yum install -y openstack-nova-api openstack-nova-cert openstack-nova-conductor openstack-nova-console \
openstack-nova-novncproxy openstack-nova-scheduler
</code></pre>

<p><strong>6、配置 Nova</strong></p>

<pre><code>openstack-config --set /etc/nova/nova.conf DEFAULT enabled_apis osapi_compute,metadata
openstack-config --set /etc/nova/nova.conf database connection mysql+pymysql://nova:123456@${HOSTNAME}/nova
openstack-config --set /etc/nova/nova.conf api_database connection mysql+pymysql://nova:123456@${HOSTNAME}/nova_api
openstack-config --set /etc/nova/nova.conf DEFAULT rpc_backend rabbit
openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_host ${HOSTNAME}
openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_userid openstack
openstack-config --set /etc/nova/nova.conf oslo_messaging_rabbit rabbit_password 123456
openstack-config --set /etc/nova/nova.conf DEFAULT auth_strategy keystone
openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_uri http://${HOSTNAME}:5000
openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_url http://${HOSTNAME}:35357
openstack-config --set /etc/nova/nova.conf keystone_authtoken memcached_servers ${HOSTNAME}:11211
openstack-config --set /etc/nova/nova.conf keystone_authtoken auth_type password
openstack-config --set /etc/nova/nova.conf keystone_authtoken project_domain_name default
openstack-config --set /etc/nova/nova.conf keystone_authtoken user_domain_name default
openstack-config --set /etc/nova/nova.conf keystone_authtoken project_name service
openstack-config --set /etc/nova/nova.conf keystone_authtoken username nova
openstack-config --set /etc/nova/nova.conf keystone_authtoken password 123456
openstack-config --set /etc/nova/nova.conf DEFAULT my_ip 192.168.188.128
openstack-config --set /etc/nova/nova.conf DEFAULT use_neutron True
openstack-config --set /etc/nova/nova.conf DEFAULT firewall_driver nova.virt.firewall.NoopFirewallDriver
openstack-config --set /etc/nova/nova.conf vnc vncserver_proxyclient_address 192.168.188.128
openstack-config --set /etc/nova/nova.conf glance api_servers http://${HOSTNAME}:9292
openstack-config --set /etc/nova/nova.conf oslo_concurrency lock_path /var/lib/nova/tmp
openstack-config --set /etc/nova/nova.conf vnc vncserver_list 192.168.188.128
openstack-config --set /etc/nova/nova.conf vnc enable True
openstack-config --set /etc/nova/nova.conf vnc novncproxy_base_url http://192.168.188.128:6080/vnc_auto.html
</code></pre>

<p><strong>7、同步 Nova 数据库</strong></p>

<pre><code>su -s /bin/sh -c &quot;nova-manage api_db sync&quot; nova
su -s /bin/sh -c &quot;nova-manage db sync&quot; nova
</code></pre>

<p>返回以下信息属正常：</p>

<pre><code>/usr/lib/python2.7/site-packages/pymysql/cursors.py:146:
Warning: Duplicate index 'block_device_mapping_instance_uuid_virtual_name_device_name_idx'
defined on the table 'nova.block_device_mapping'. This is deprecated and will be disallowed in a future release.
 result = self._query(query)
/usr/lib/python2.7/site-packages/pymysql/cursors.py:146:
Warning: Duplicate index 'uniq_instances0uuid' defined on the table 'nova.instances'.
This is deprecated and will be disallowed in a future release.
 result = self._query(query)
</code></pre>

<p><strong>8、配置 Nova 开机启动、启动 Nova 并查看状态</strong></p>

<pre><code>systemctl enable openstack-nova-api.service openstack-nova-cert.service \
openstack-nova-consoleauth.service openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service
systemctl restart openstack-nova-api.service openstack-nova-cert.service \
openstack-nova-consoleauth.service openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service
systemctl status openstack-nova-api.service openstack-nova-cert.service \
openstack-nova-consoleauth.service openstack-nova-scheduler.service openstack-nova-conductor.service openstack-nova-novncproxy.service
</code></pre>

<p><strong>9、安装 openstack-nova-compute 计算服务和追加 Nova 配置文件，并设置开机启动、启动服务以及查看状态</strong></p>

<pre><code>yum install -y openstack-nova-compute
</code></pre>

<p>追加配置文件：
虚拟机环境：</p>

<pre><code>openstack-config --set /etc/nova/nova.conf libvirt virt_type qemu
</code></pre>

<p>实体机环境：</p>

<pre><code>openstack-config --set /etc/nova/nova.conf libvirt virt_type KVM
</code></pre>

<p>设置开机启动、启动服务以及查看状态：</p>

<pre><code>systemctl enable libvirtd.service openstack-nova-compute.service
systemctl start libvirtd.service openstack-nova-compute.service
systemctl status libvirtd.service openstack-nova-compute.service
</code></pre>

<p><strong>10、验证 Nova 服务</strong></p>

<pre><code>nova service-list
nova endpoints
</code></pre>

<h6 id="0x08-安装-neutron">0x08  安装 Neutron</h6>

<p><strong>1、创建 neutron 数据库，并创建数据库用户以及赋予权限</strong></p>

<pre><code>mysql -uroot -p123456 -e &quot;CREATE DATABASE neutron;&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'localhost' IDENTIFIED BY '123456';&quot;
mysql -uroot -p123456 -e &quot;GRANT ALL PRIVILEGES ON neutron.* TO 'neutron'@'%' IDENTIFIED BY '123456';&quot;
</code></pre>

<p><strong>2、创建 neutron 用户以及赋予 admin 权限</strong></p>

<pre><code>openstack user create --domain default neutron --password 123456
openstack role add --project service --user neutron admin
</code></pre>

<p><strong>3、创建 neutron 服务并创建 endpoint</strong></p>

<pre><code>openstack service create --name neutron --description &quot;OpenStack Networking&quot; network
</code></pre>

<p>创建 endpoint：</p>

<pre><code>openstack endpoint create --region RegionOne network public http://${HOSTNAME}:9696
openstack endpoint create --region RegionOne network internal http://${HOSTNAME}:9696
openstack endpoint create --region RegionOne network admin http://${HOSTNAME}:9696
</code></pre>

<p><strong>4、安装 neutron 等组件</strong></p>

<pre><code>yum install -y openstack-neutron openstack-neutron-ml2 openstack-neutron-linuxbridge ebtables
</code></pre>

<p><strong>5、配置 /etc/neutron/neutron.conf 文件</strong></p>

<pre><code>openstack-config --set /etc/neutron/neutron.conf database connection mysql+pymysql://neutron:123456@${HOSTNAME}/neutron
openstack-config --set /etc/neutron/neutron.conf DEFAULT core_plugin ml2
openstack-config --set /etc/neutron/neutron.conf DEFAULT service_plugins router
openstack-config --set /etc/neutron/neutron.conf DEFAULT allow_overlapping_ips True
openstack-config --set /etc/neutron/neutron.conf DEFAULT rpc_backend rabbit
openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_host ${HOSTNAME}
openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_userid openstack
openstack-config --set /etc/neutron/neutron.conf oslo_messaging_rabbit rabbit_password 123456
openstack-config --set /etc/neutron/neutron.conf DEFAULT auth_strategy keystone
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_uri http://${HOSTNAME}:5000
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_url http://${HOSTNAME}:35357
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken memcached_servers ${HOSTNAME}:11211
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken auth_type password
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken project_domain_name default
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken user_domain_name default
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken project_name service
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken username neutron
openstack-config --set /etc/neutron/neutron.conf keystone_authtoken password 123456
openstack-config --set /etc/neutron/neutron.conf DEFAULT notify_nova_on_port_status_changes True
openstack-config --set /etc/neutron/neutron.conf DEFAULT notify_nova_on_port_data_changes True
openstack-config --set /etc/neutron/neutron.conf nova auth_url http://${HOSTNAME}:35357
openstack-config --set /etc/neutron/neutron.conf nova auth_type password
openstack-config --set /etc/neutron/neutron.conf nova project_domain_name default
openstack-config --set /etc/neutron/neutron.conf nova user_domain_name default
openstack-config --set /etc/neutron/neutron.conf nova region_name RegionOne
openstack-config --set /etc/neutron/neutron.conf nova project_name service
openstack-config --set /etc/neutron/neutron.conf nova username nova
openstack-config --set /etc/neutron/neutron.conf nova password 123456
openstack-config --set /etc/neutron/neutron.conf oslo_concurrency lock_path /var/lib/neutron/tmp
</code></pre>

<p><strong>6、配置 /etc/neutron/plugins/ml2/ml2_conf.ini 文件</strong></p>

<pre><code>openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 type_drivers flat,vlan,vxlan
openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 mechanism_drivers linuxbridge,l2population
openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 extension_drivers port_security
openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2 tenant_network_types vxlan
openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2_type_flat flat_networks provider
openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini ml2_type_vxlan vni_ranges 1:1000
openstack-config --set /etc/neutron/plugins/ml2/ml2_conf.ini securitygroup enable_ipset True
</code></pre>

<p><strong>7、配置 /etc/neutron/plugins/ml2/linuxbridge_agent.ini 文件</strong></p>

<pre><code>openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini linux_bridge physical_interface_mappings provider:eno16777736
openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini vxlan enable_vxlan True
openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini vxlan local_ip 192.168.188.128
openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini vxlan l2_population True
openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini agent prevent_arp_spoofing True
openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini securitygroup enable_security_group True
openstack-config --set /etc/neutron/plugins/ml2/linuxbridge_agent.ini securitygroup firewall_driver neutron.agent.linux.iptables_firewall.IptablesFirewallDriver
</code></pre>

<p><strong>8、配置 /etc/neutron/l3_agent.ini 文件</strong></p>

<pre><code>openstack-config --set /etc/neutron/l3_agent.ini DEFAULT interface_driver neutron.agent.linux.interface.BridgeInterfaceDriver
openstack-config --set /etc/neutron/l3_agent.ini DEFAULT external_network_bridge
</code></pre>

<p><strong>9、配置 /etc/neutron/dhcp_agent.ini 文件</strong></p>

<pre><code>openstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT interface_driver neutron.agent.linux.interface.BridgeInterfaceDriver
openstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT dhcp_driver neutron.agent.linux.dhcp.Dnsmasq
openstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT enable_isolated_metadata True
openstack-config --set /etc/neutron/dhcp_agent.ini DEFAULT verbose True
</code></pre>

<p><strong>10、配置 /etc/neutron/metadata_agent.ini 文件</strong></p>

<pre><code>openstack-config --set /etc/neutron/metadata_agent.ini DEFAULT nova_metadata_ip ${HOSTNAME}
openstack-config --set /etc/neutron/metadata_agent.ini DEFAULT metadata_proxy_shared_secret 123456
openstack-config --set /etc/neutron/metadata_agent.ini DEFAULT verbose True
</code></pre>

<p><strong>11、追加配置 Nova，配置/etc/nova/nova.conf 文件</strong></p>

<pre><code>openstack-config --set /etc/nova/nova.conf neutron url http://${HOSTNAME}:9696
openstack-config --set /etc/nova/nova.conf neutron auth_url http://${HOSTNAME}:35357
openstack-config --set /etc/nova/nova.conf neutron auth_plugin password
openstack-config --set /etc/nova/nova.conf neutron project_domain_id default
openstack-config --set /etc/nova/nova.conf neutron user_domain_id default
openstack-config --set /etc/nova/nova.conf neutron region_name RegionOne
openstack-config --set /etc/nova/nova.conf neutron project_name service
openstack-config --set /etc/nova/nova.conf neutron username neutron
openstack-config --set /etc/nova/nova.conf neutron password 123456
openstack-config --set /etc/nova/nova.conf neutron service_metadata_proxy True
openstack-config --set /etc/nova/nova.conf neutron metadata_proxy_shared_secret 123456
</code></pre>

<p><strong>12、重启 Nova 服务</strong>
上面修改完 Nova 配置，所以需要重启一次。</p>

<pre><code>systemctl restart openstack-nova-api.service
systemctl status openstack-nova-api.service
</code></pre>

<p>**13、配置 /etc/neutron/dnsmasq-neutron.conf
**
新建文件：</p>

<pre><code>vim /etc/neutron/dnsmasq-neutron.conf
</code></pre>

<p>写入：</p>

<pre><code>dhcp-option-force=26,1450
</code></pre>

<p><strong>14、创建配置文件软连接</strong></p>

<pre><code>ln -s /etc/neutron/plugins/ml2/ml2_conf.ini /etc/neutron/plugin.ini
</code></pre>

<p><strong>15、同步 Neutron 数据库</strong></p>

<pre><code>su -s /bin/sh -c &quot;neutron-db-manage --config-file /etc/neutron/neutron.conf --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head&quot; neutron
</code></pre>

<p>同步的时候发现了 <code>No handlers could be found for logger &quot;oslo_config.cfg&quot;</code> 这个提示，目前尚未解决。
<strong>16、配置 Neutron 服务开机启动、启动 Neutron 服务并查看状态</strong></p>

<pre><code>systemctl enable neutron-server.service neutron-linuxbridge-agent.service neutron-dhcp-agent.service neutron-metadata-agent.service neutron-l3-agent.service
systemctl restart neutron-server.service neutron-linuxbridge-agent.service neutron-dhcp-agent.service neutron-metadata-agent.service neutron-l3-agent.service
systemctl status neutron-server.service neutron-linuxbridge-agent.service neutron-dhcp-agent.service neutron-metadata-agent.service neutron-l3-agent.service
</code></pre>

<p><strong>17、验证 Neutron 服务</strong></p>

<pre><code>neutron ext-list
neutron agent-list
</code></pre>

<p><strong>18、设置安全组规则</strong></p>

<pre><code>openstack security group rule create --proto icmp default
openstack security group rule create --proto tcp --dst-port 22 default
</code></pre>

<p>开放 icmp 协议，让实例允许被 ping 通。开放 22 端口，允许使用 ssh 连接实例。
<strong>19、重启服务</strong></p>

<pre><code>systemctl restart neutron-dhcp-agent neutron-l3-agent neutron-linuxbridge-agent neutron-metadata-agent neutron-server \
libvirtd.service openstack-nova-compute.service
systemctl status neutron-dhcp-agent neutron-l3-agent neutron-linuxbridge-agent neutron-metadata-agent neutron-server \
libvirtd.service openstack-nova-compute.service
</code></pre>

<p><strong>20、创建 flat 模式网络</strong>
<strong>20.1 创建 flat 模式的 public 网络：</strong>
创建一个 public 的 flat 网络，用于连接外网。</p>

<pre><code>neutron --debug net-create --shared provider --router:external True --provider:network_type flat --provider:physical_network provider
</code></pre>

<p><strong>20.2 创建  public 网络子网：</strong>
网段为 <code>192.168.188/24</code> ，浮动范围 <code>192.168.188.20~192.168.188.80</code> ，供实例使用。dns 设置为 <code>114.114.114.114</code>，网关为虚拟机的 <code>192.168.188.2</code> 。</p>

<pre><code>neutron subnet-create provider 192.168.188.0/24 --name provider-sub --allocation-pool \
start=192.168.188.20,end=192.168.188.80 --dns-nameserver 114.114.114.114 --gateway 192.168.188.2
</code></pre>

<p><strong>21、创建 vxLan 模式网络</strong>
<strong>21.1 创建 vxLan 模式的 private 网络：</strong>
该网络不连接外网，用于实例网络连接、管理。</p>

<pre><code>neutron net-create private --provider:network_type vxlan --router:external False --shared
</code></pre>

<p><strong>21.2 创建 private 网络子网：</strong></p>

<pre><code>neutron subnet-create private --name internal-subnet --gateway 10.0.0.1 10.0.0.0/24
</code></pre>

<p><strong>22、路由配置留到安装完 Dashboard 后配置</strong></p>

<h6 id="0x09-安装-dashboard">0x09  安装 Dashboard</h6>

<p><strong>1、安装 Dashboard 组件</strong></p>

<pre><code>yum install -y openstack-dashboard
</code></pre>

<p><strong>2、修改配置文件</strong></p>

<pre><code>vim /etc/openstack-dashboard/local_settings
</code></pre>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/WY@UGXT2UFO5YXTHA3.jpg"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/WY@UGXT2UFO5YXTHA3.jpg" alt="wyugxt2ufo5yxtha3" />
</a> 这配置文件超容易弄错的，我提供配置文件给大家，自个对照以下吧。查看地址 <a href="https://www.nervgeek.com/wp-content/uploads/2016/09/local_settings.txt">local_settings</a> 。
<strong>3、配置 Dashboard 开机启动、启动 Dashboard 服务并查看状态</strong></p>

<pre><code>systemctl enable httpd.service memcached.service
systemctl restart httpd.service memcached.service
systemctl status httpd.service memcached.service
</code></pre>

<p><strong>4、浏览器登录 Dashboard</strong>
在浏览器输入 192.168.188.127/dashboard：
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/0QIIBJ7_WT@VDPNXBO1.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/0QIIBJ7_WT@VDPNXBO1.png" alt="0qiibj7_wtvdpnxbo1" />
</a>
域为我们创建的 <code>default</code> ，用户为 <code>admin</code> ，密码就是我们设置的密码 <code>123456</code> 。
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/7WX_LQMS1RU6CNVOA@2.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/7WX_LQMS1RU6CNVOA@2.png" alt="7wx_lqms1ru6cnvoa2" />
</a>
不知道是不是我内存分配太少的原因&hellip;页面打开超慢的&hellip;假如大家机器允许可以给予更高的配置。</p>

<h6 id="0x10-路由配置">0x10  路由配置</h6>

<p><strong>1、创建路由</strong>
<strong><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/SRH3CFETSQM52VFPW_ND.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/SRH3CFETSQM52VFPW_ND.png" alt="srh3cfetsqm52vfpw_nd" />
</a></strong></p>

<p><code>新建路由位置。</code></p>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/PGJ2CT7H7S2XSCEE.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/PGJ2CT7H7S2XSCEE.png" alt="pgj2ct7h7s2xscee" />
</a></p>

<p><code>信息填写。</code></p>

<p><strong>2、路由接口配置</strong>
<a href="https://www.nervgeek.com/wp-content/uploads/2016/09/L0LK3SNRX2US8Y57XI.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/L0LK3SNRX2US8Y57XI.png" alt="l0lk3snrx2us8y57xi" />
</a></p>

<p><code>点击 &quot;名称&quot; 进入配置界面。</code></p>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/G55T4SIBAU8B8L6YY.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/G55T4SIBAU8B8L6YY.png" alt="g55t4sibau8b8l6yy" />
</a></p>

<p><code>增加接口位置。</code></p>

<p><a href="https://www.nervgeek.com/wp-content/uploads/2016/09/Z5ZTMGWCYOR4BVDMU4.png"><img src="https://www.nervgeek.com/wp-content/uploads/2016/09/Z5ZTMGWCYOR4BVDMU4.png" alt="z5ztmgwcyor4bvdmu4" />
</a></p>

<p><code>提交配置。刷新页面后可发现两个接口状态皆为 &quot;运行中&quot; 。</code></p>

  </div>

  <footer>
    <ul class="stats">
  <li class="categories">
    <ul>
        
            
            
                <i class="fa fa-folder"></i>
                
                
                <li><a class="article-category-link" href="/categories/%E5%BC%80%E5%8F%91-develop">开发 Develop</a></li>
                
            
        
    </ul>
  </li>
  <li class="tags">
    <ul>
        
    </ul>
  </li>
</ul>

  </footer>

</article>

    <article class="post">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "shortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>


<ul class="actions pagination">
    
        <li><a href="/2016/08/2016-08-25-sony-xba-a2e5bc80e7aeb1/"
                class="button big previous">Sony XBA-A2圈铁耳机开箱</a></li>
    

    
        <li><a href="/2016/09/2016-09-08-openstack-mitakae6898be58aa8e5ae89e8a385-e690ade5bbbacomputee88a82e782b9/"
                class="button big next">OpenStack Mitaka手动安装 - 搭建Compute节点</a></li>
    
</ul>


    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
      
        <a href='/about' style="border-bottom: none;"><img src="/img/main/logo.jpg" class="intro-circle" width="96" alt="Website&#39;s Logo" /></a>
      
    
    
      <header>
        <h2>Mr9esx</h2>
        <p>95年生人，现居广州。<br/>Gopher & Pythonista。<br/>BACKEND & FRONTEND。</p>
      </header>
    
    
      <ul class="icons">
        
        
  <li><a href="//github.com/mr9esx" target="_blank" title="GitHub" class="fa fa-github"></a></li>



































































  <li><a href="//telegram.me/mr9esx" target="_blank" title="telegram" class="fa fa-telegram"></a></li>











  <li><a href="mailto:mr9esx1138099359@gmail.com" title="Email" class="fa fa-envelope"></a></li>


      </ul>
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/2019/06/golang-interview-question/">Go 面试题</a>
              </h3>
              
              <time class="published" datetime='2019-06-24'>
                June 24, 2019
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/2019/05/2019-05-09-windows-10-e4b88be79a84-go-micro-e5ae89e8a385e7ac94e8aeb0efbc88go-mod-e6a8a1e5bc8fefbc89/">Windows 10 下的 go-micro 安装笔记（go mod 模式）</a>
              </h3>
              
              <time class="published" datetime='2019-05-09'>
                May 9, 2019
              </time>
            </header>
            

          </article>
        
          <article class="mini-post">
            <header>
              <h3>
                <a href="/2019/04/2019-04-28-windows-10-e5ae89e8a385-golang-grpc/">Windows 10 安装 Golang gRpc</a>
              </h3>
              
              <time class="published" datetime='2019-04-28'>
                April 28, 2019
              </time>
            </header>
            

          </article>
        
      </div>

      
        <a href=
          
            /
          
        class="button">View more posts</a>
      
    </div>
  </section>

  
  
  
  
  
    <section id="categories">
      <header>
        <h3>
          <a href="/categories/">Categories</a>
        </h3>
      </header>
        
          
        

        
        <p>
          <article style="font-size: 14px;">
            <header>
              
                <a href="/categories/%E4%B8%AA%E4%BA%BA/">个人</a>
                <span style="float:right;">3
              
            </header>
          </article>
        </p>
        
        <p>
          <article style="font-size: 14px;">
            <header>
              
                <a href="/categories/%E5%86%99%E7%9C%9F-photo/">写真-PHOTO</a>
                <span style="float:right;">9
              
            </header>
          </article>
        </p>
        
        <p>
          <article style="font-size: 14px;">
            <header>
              
                <a href="/categories/%E5%89%81%E6%89%8B%E5%BC%80%E7%AE%B1-show-what-i-buy/">剁手开箱-SHOW-WHAT-I-BUY</a>
                <span style="float:right;">3
              
            </header>
          </article>
        </p>
        
        <p>
          <article style="font-size: 14px;">
            <header>
              
                <a href="/categories/%E5%BC%80%E5%8F%91-develop/">开发-DEVELOP</a>
                <span style="float:right;">111
              
            </header>
          </article>
        </p>
        
        <p>
          <article style="font-size: 14px;">
            <header>
              
                <a href="/categories/%E6%8A%98%E8%85%BE-make-trouble/">折腾-MAKE-TROUBLE</a>
                <span style="float:right;">3
              
            </header>
          </article>
        </p>
        
        <p>
          <article style="font-size: 14px;">
            <header>
              
                <a href="/categories/%E6%96%87%E7%AB%A0/">文章</a>
                <span style="float:right;">14
              
            </header>
          </article>
        </p>
        
        <p>
          <article style="font-size: 14px;">
            <header>
              
                <a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8-cyber-security/">网络安全-CYBER-SECURITY</a>
                <span style="float:right;">20
              
            </header>
          </article>
        </p>
        
    </section>
  
  

  
  

  <section id="mini-bio">
    <video src="" id="sidebar-video" type="video/mp4" autoplay autobuffer loop></video>
  </section>

  
  <section id="footer">
    

    <p class="copyright">
      <svg t="1540987830423" class="icon" style="" viewBox="200 200 580 580" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1025" xmlns:xlink="http://www.w3.org/1999/xlink" width="41" height="30"><path d="M267.680514 709.995914c-10.559782-78.799883 35.66417-188.681389 73.719233-234.008756-2.291273-27.495282-5.877615-98.126277 15.34157-110.279988 17.533223-10.061679 60.668937 14.544606 88.064598 32.575931l272.16344 1.892792c27.19642-18.031326 72.723028-44.729643 90.853974-34.369102 23.610079 13.5484 16.437397 99.520965 14.644226 117.851152 36.461134 43.833058 60.370075 176.428057 60.370075 234.407238" fill="#BDBDBD" p-id="1027"></path><path d="M809.915361 689.075591c1.295068 28.790349-26.698317 39.648993-63.757174 39.648993s-72.125304-7.770406-70.332134-39.648993c1.69355-30.68314 36.261893-55.588287 67.044654-55.588287 34.468723 0 65.749587 24.905146 67.044654 55.588287zM319.184356 689.075591c1.295068 28.790349-26.698317 39.648993-63.757174 39.648993s-72.125304-7.770406-70.332134-39.648993c1.69355-30.68314 36.261893-55.588287 67.044654-55.588287 34.369102 0 65.649966 24.905146 67.044654 55.588287z" fill="#BDBDBD" p-id="1028"></path><path d="M193.562798 664.768168c-10.559782-78.799883 35.66417-188.681389 73.719233-234.008756-2.291273-27.495282-5.877615-98.126277 15.341571-110.279988 17.533223-10.061679 60.668937 14.544606 88.064597 32.575932l272.16344 1.892791c27.19642-18.031326 72.723028-44.729643 90.853974-34.369102 23.610079 13.5484 16.437397 99.520965 14.644226 117.851152 36.461134 43.833058 60.370075 176.428057 60.370075 234.407239" fill="#FFFFFF" p-id="1029"></path><path d="M814.996011 672.737815h-12.552194c0-30.284658-6.375717-77.803677-16.337776-121.039012-11.85485-51.802705-26.997179-90.555112-42.53799-109.283782-1.095826-1.295068-1.593929-2.988618-1.394688-4.682168 4.781788-47.917502 3.187859-103.306547-11.555988-111.774297-4.184065-2.390894-22.414632-6.87382-84.279015 34.169861-0.996206 0.697344-2.291273 1.095826-3.486721 1.095827l-272.16344-1.892792c-1.195447 0-2.390894-0.398482-3.3871-0.996205-59.672731-39.15089-77.504816-34.667964-81.489639-32.376691-12.054091 6.87382-16.835879 47.817881-12.153711 104.302753 0.099621 1.69355-0.398482 3.287479-1.494309 4.582547-37.158478 44.131919-82.585466 152.618737-72.324545 229.127347l-12.452573 1.69355c-4.881409-36.461134 1.793171-83.482051 18.927911-132.495379 14.345364-41.143302 34.667964-79.89571 54.592081-104.402373-1.095826-13.64802-2.390894-37.35772-0.996206-59.274249 1.992412-30.185037 8.368129-48.017122 19.625255-54.49246 15.640432-8.965853 47.020916 1.69355 93.145248 31.679346l268.377858 1.793171c47.61864-31.380484 79.89571-42.737231 95.934624-33.572138 12.153711 6.973441 18.72867 27.395661 20.023737 62.362487 0.896585 23.610079-0.896585 47.61864-1.992411 58.975387 37.258099 48.116743 59.971593 179.516295 59.971592 236.49927z" fill="#6B3437" p-id="1030"></path><path d="M871.680125 679.213153H107.590233c-4.084444 0-7.371923-3.287479-7.371924-7.371923s3.287479-7.371923 7.371924-7.371924h764.089892c4.084444 0 7.371923 3.287479 7.371923 7.371924s-3.287479 7.371923-7.371923 7.371923z" fill="#6B3437" p-id="1031"></path><path d="M330.441483 517.03084a21.717288 14.843467 90 1 0 29.686934 0 21.717288 14.843467 90 1 0-29.686934 0Z" fill="" p-id="1032"></path><path d="M505.076369 364.01362h138.572235s66.247689-42.039887 84.97636-35.76379c18.72867 6.276097 26.598696 28.491487 17.533223 115.559879 0 0 30.882382 57.481078 30.583519 72.523786 0 0-87.865357 127.315108-242.078023 33.572138-78.999124-55.389046-63.856795-152.319875-29.587314-185.892013z" fill="#FEAE02" p-id="1033"></path><path d="M604.298473 517.03084a21.717288 14.843467 90 1 0 29.686934 0 21.717288 14.843467 90 1 0-29.686934 0Z" fill="" p-id="1034"></path><path d="M467.021306 580.688394c-6.076856 0-11.755229-2.689756-15.540812-7.471544-1.394688-1.793171-1.095826-4.283685 0.597724-5.777994 1.793171-1.394688 4.283685-1.095826 5.777994 0.597723 2.291273 2.789376 5.578753 4.383306 9.165094 4.383306 6.475338 0 11.85485-5.279891 11.854849-11.854849 0-2.291273 1.793171-4.084444 4.084444-4.084445s4.084444 1.793171 4.084444 4.084445c0 11.157506-8.965853 20.123358-20.023737 20.123358z" fill="" p-id="1035"></path><path d="M499.099134 580.688394c-11.057885 0-19.924117-8.965853-19.924117-19.924117 0-2.291273 1.793171-4.084444 4.084444-4.084444s4.084444 1.793171 4.084444 4.084444c0 6.475338 5.279891 11.85485 11.85485 11.854849 3.586341 0 6.973441-1.593929 9.165094-4.383305 1.394688-1.793171 3.984823-1.992412 5.777994-0.597724 1.793171 1.394688 1.992412 3.984823 0.597723 5.777994-3.885203 4.482926-9.563576 7.272303-15.640432 7.272303z" fill="" p-id="1036"></path><path d="M495.712034 390.313455c-4.283685 11.755229-8.56737 17.234361-18.72867 17.234361-10.1613 0-14.644226-7.969647-18.429808-18.529429-4.781788-13.149917 4.682168-25.801732 18.330188-25.403249 16.636638 0.498103 23.610079 13.5484 18.82829 26.698317zM545.123845 383.240393c-3.088238 5.977235-6.176476 8.666991-13.5484 8.666991-7.272303 0-10.559782-4.084444-13.249538-9.364335-3.48672-6.674579 3.3871-13.050297 13.249538-12.851056 12.054091 0.298862 17.03512 6.87382 13.5484 13.5484zM441.916918 383.240393c-3.088238 5.977235-6.176476 8.666991-13.5484 8.666991-7.272303 0-10.559782-4.084444-13.249538-9.364335-3.48672-6.674579 3.3871-13.050297 13.249538-12.851056 12.054091 0.298862 17.03512 6.87382 13.5484 13.5484z" fill="#F97700" p-id="1037"></path><path d="M467.320167 534.663683h33.372897c5.379512 0 8.268509 6.276097 4.781788 10.360541l-17.134741 16.437397c-2.490515 2.888997-7.073062 2.888997-9.563576 0l-16.238156-16.437397c-3.48672-4.084444-0.597724-10.360541 4.781788-10.360541z" fill="" p-id="1038"></path><path d="M667.457924 364.511723c18.031326-11.95447 46.423193-27.993385 67.243895-34.269482-0.199241-0.099621-0.398482-0.199241-0.597723-0.398482-18.031326-10.26092-63.259072 16.537017-90.555113 34.568343h23.908941z" fill="#FEE6A5" p-id="1039"></path><path d="M295.873139 437.433992c-2.291273-27.19642-18.230567-96.432727 9.563577-109.184162-6.276097-0.896585-12.651814-1.095826-16.736259 1.195447-21.219185 12.153711-16.736258 80.593054-14.444985 108.088335-38.154684 45.327366-84.378636 155.109252-73.719233 234.008756l24.606285 0.298862c-9.862438-78.799883 32.775173-189.478354 70.730615-234.407238z" fill="#F1E8E3" p-id="1040"></path><path d="M302.84658 672.737815c1.295068 28.790349-26.698317 39.648993-63.757174 39.648993s-72.125304-7.770406-70.332134-39.648993c1.69355-30.68314 36.261893-55.588287 67.044654-55.588287 34.369102 0 65.649966 24.905146 67.044654 55.588287z" fill="#FFFFFF" p-id="1041"></path><path d="M239.089406 718.862146c-33.372896 0-55.389046-6.076856-67.243896-18.629049-6.973441-7.371923-10.1613-16.736258-9.563576-27.893764 0.896585-16.337776 9.862438-31.878587 25.104388-44.032299 14.146123-11.257126 31.878587-17.732464 48.415604-17.732464 38.353925 0 72.025683 28.292246 73.519992 61.764763 0.498103 11.356747-2.888997 20.920323-10.161299 28.491487-11.356747 12.054091-31.579726 18.031326-60.071213 18.031326z m-3.28748-95.137659c-32.476311 0-59.174628 26.598696-60.469695 49.41181-0.398482 7.471544 1.593929 13.448779 5.977235 18.230567 9.165094 9.663197 28.591108 14.544606 57.77994 14.544606 24.407043 0 41.940267-4.781788 50.706878-13.946882 4.682168-4.881409 6.87382-11.057885 6.475338-18.828291-1.195447-26.797938-28.88997-49.41181-60.469696-49.41181z" fill="#6B3437" p-id="1042"></path><path d="M295.474657 671.84123c-0.597724-7.073062-3.187859-14.644226-8.168888-21.518047 0.498103 2.390894 0.796965 4.781788 0.996206 7.172682 1.095826 25.602491-16.636638 33.472517-49.611052 33.472517s-57.182216-6.574959-55.588287-34.966825c0.099621-1.992412 1.295068-3.287479 1.69355-5.180271-3.785582 5.578753-7.272303 11.356747-8.168888 18.927911-3.685962 30.284658 27.893764 37.45734 62.163246 37.457341 28.591108 0.099621 58.875766-9.165094 56.684113-35.365308z" fill="#F1E8E3" p-id="1043"></path><path d="M745.859325 440.721471s23.80932 35.166067 32.077828 71.228719c0 0-3.187859 6.574959-10.659402 13.448779 0 0-1.494309-37.158478-21.418426-84.677498z" fill="#E0930A" p-id="1044"></path><path d="M777.937153 511.95019s-5.777994 8.56737-10.659402 13.448779c-4.881409 4.881409 0 0 0 0s15.34157 82.087363 12.552194 140.564646l24.207802 2.590135c-0.099621 0-5.578753-106.892888-26.100594-156.60356" fill="#F1E8E3" p-id="1045"></path><path d="M793.677206 672.737815c1.295068 28.790349-26.698317 39.648993-63.757175 39.648993s-72.125304-7.770406-70.332133-39.648993c1.69355-30.68314 36.261893-55.588287 67.044654-55.588287 34.369102 0 65.649966 24.905146 67.044654 55.588287z" fill="#FFFFFF" p-id="1046"></path><path d="M729.920031 718.862146c-33.372896 0-55.389046-6.076856-67.243895-18.629049-6.973441-7.371923-10.1613-16.736258-9.563576-27.893764 0.896585-16.337776 9.862438-31.878587 25.104387-44.032299 14.146123-11.257126 31.878587-17.732464 48.415605-17.732464 38.353925 0 72.025683 28.292246 73.519992 61.764763 0.498103 11.356747-2.888997 20.920323-10.1613 28.491487-11.356747 12.054091-31.579726 18.031326-60.071213 18.031326z m-3.287479-95.137659c-32.476311 0-59.174628 26.598696-60.469696 49.41181-0.398482 7.471544 1.593929 13.448779 5.977235 18.230567 9.165094 9.663197 28.591108 14.544606 57.77994 14.544606 24.407043 0 41.940267-4.781788 50.706878-13.946882 4.682168-4.881409 6.87382-11.057885 6.475338-18.828291-1.195447-26.797938-28.88997-49.41181-60.469695-49.41181z" fill="#6B3437" p-id="1047"></path><path d="M786.504524 671.641989c-0.597724-7.073062-3.48672-14.743847-8.46775-21.717288 0.498103 2.390894 0.796965 4.781788 0.996206 7.172682 1.095826 25.602491-16.437397 33.771379-49.411811 33.771379s-57.281837-6.574959-55.687907-34.966826c0.099621-1.992412 1.095826-2.988618 1.494309-4.881409-3.785582 5.578753-7.073062 10.1613-7.969647 17.732465-3.685962 30.384279 26.399455 38.254305 62.262866 38.353925 34.667964 0.298862 58.875766-9.264714 56.783734-35.464928z" fill="#F1E8E3" p-id="1048"></path><path d="M250.246911 566.143788c-3.088238 2.988618-6.176476 4.383306-13.548399 4.383306s-10.559782-1.992412-13.249538-4.682167c-3.48672-3.287479 3.3871-6.574959 13.249538-6.375718 11.95447 0.099621 17.03512 3.3871 13.548399 6.674579zM247.158673 595.731102c-3.088238 4.582547-6.176476 6.674579-13.5484 6.674579s-10.559782-3.088238-13.249538-7.172682c-3.48672-5.18027 3.3871-10.061679 13.249538-9.862438 11.95447 0.099621 17.03512 5.18027 13.5484 10.360541zM791.186691 588.658041c-3.088238 4.582547-6.176476 6.674579-13.548399 6.674579s-10.559782-3.088238-13.249538-7.172682c-3.48672-5.18027 3.3871-10.061679 13.249538-9.862438 12.054091 0.099621 17.03512 5.18027 13.548399 10.360541z" fill="#F97700" p-id="1049"></path></svg>
      <br />
      Another Blog <a href="https://www.miaoplus.com" target="_blank">Miao+</a>
    </p>

    <p class="copyright">
      <svg version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="86px" height="30px" viewBox="232 265 280 140" enable-background="new 0 0 800 800" xml:space="preserve"><g><path fill="#00A0FF" d="M282.639,281.223L282.639,281.223L282.639,281.223L282.639,281.223L282.639,281.223c-2.473-1.861-5.034-3.52-7.664-4.983c-1.904-1.059-4.295-0.564-5.604,1.177l-16.492,21.912l-1.176,1.563c-1.786,2.373-4.638,3.665-7.605,3.529c-1.082-0.049-2.164-0.039-3.242,0.029c-8.289,0.525-16.308,4.525-21.694,11.681c-4.33,5.753-6.229,12.576-5.879,19.245c0.063,1.201,0.757,2.298,1.851,2.796c2.27,1.032,4.017,3.137,4.454,5.83c0.618,3.809-1.722,7.551-5.418,8.659c-4.357,1.306-8.832-1.363-9.814-5.724c-0.532-2.362,0.079-4.711,1.463-6.48c0.768-0.981,1.154-2.203,1.044-3.444c-0.758-8.552,1.52-17.402,7.09-24.802c7.026-9.334,17.717-14.274,28.562-14.337c2.09-0.012,4.052-1.011,5.309-2.681l15.188-20.178c1.189-1.579,0.421-3.848-1.476-4.405c-25.43-7.46-53.905,0.934-70.96,23.146c-22.099,28.781-16.729,70.279,11.987,92.462c2.687,2.076,5.482,3.909,8.36,5.508c1.893,1.052,4.274,0.537,5.577-1.193l16.492-21.911l1.176-1.563c1.786-2.373,4.638-3.665,7.605-3.529c1.082,0.049,2.164,0.039,3.242-0.029c8.289-0.525,16.308-4.525,21.694-11.681c4.33-5.753,6.229-12.576,5.879-19.245c-0.063-1.201-0.757-2.298-1.851-2.796c-2.27-1.032-4.017-3.137-4.454-5.83c-0.618-3.809,1.722-7.551,5.418-8.658c4.357-1.306,8.832,1.363,9.814,5.724c0.532,2.362-0.079,4.711-1.463,6.48c-0.768,0.981-1.154,2.203-1.044,3.444c0.758,8.552-1.52,17.402-7.09,24.802c-7.026,9.334-17.717,14.274-28.562,14.337c-2.09,0.012-4.052,1.011-5.309,2.681l-15.187,20.177c-1.18,1.568-0.439,3.842,1.444,4.396c25.633,7.534,54.368-1.045,71.384-23.652C317.614,344.545,311.773,303.151,282.639,281.223z"/><g><path fill="#00A0FF" d="M391.613,299.257l-0.001-1.567c-0.001-1.133-0.92-2.052-2.053-2.052h-51.424c-1.134,0-2.053,0.919-2.053,2.053v3.137c0,1.134,0.919,2.053,2.053,2.053h43.629c1.255,0,2.221,1.107,2.034,2.348c-1.224,8.113-5.061,23.285-17.051,37.854c-0.847,1.029-2.419,1.011-3.241-0.039c-10.032-12.828-13.119-25.98-13.962-30.826c-0.184-1.061-1.166-1.792-2.237-1.678l-1.643,0.174l-1.449,0.151c-1.188,0.124-2.026,1.228-1.808,2.403c1.028,5.558,4.773,20.841,16.549,35.388c0.683,0.843,0.625,2.076-0.175,2.81c-14.336,13.149-27.229,16.031-31.841,16.657c-1.027,0.14-1.794,1.009-1.789,2.046l0.015,3.169c0.006,1.22,1.065,2.174,2.276,2.032c5.484-0.645,20.116-3.743,36.284-18.613c0.799-0.734,2.014-0.734,2.81,0.003c7.813,7.235,17.799,14.211,31.266,18.495c1.091,0.347,2.259-0.287,2.582-1.385l0.887-3.007c0.318-1.078-0.297-2.198-1.367-2.539c-12.252-3.908-21.285-10.2-28.378-16.651c-0.818-0.744-0.859-2.006-0.141-2.846C391.369,325.431,391.615,300.395,391.613,299.257z"/><path fill="#00A0FF" d="M427.31,292.355h-3.137c-1.134,0-2.053,0.919-2.053,2.053v10.999c0,1.134-0.919,2.053-2.053,2.053h-7.379c-1.134,0-2.053,0.919-2.053,2.053v3.137c0,1.134,0.919,2.053,2.053,2.053h7.379c1.134,0,2.053,0.919,2.053,2.053v15.933c0,1.134-0.919,2.053-2.053,2.053h-7.379c-1.134,0-2.053,0.919-2.053,2.053v3.137c0,1.134,0.919,2.053,2.053,2.053h7.379c1.134,0,2.053,0.919,2.053,2.053v15.065c0,3.27-1.307,8.606-9.648,9.31c-1.078,0.091-1.921,0.965-1.921,2.047v3.125c0,1.196,1.017,2.157,2.209,2.055c8.099-0.693,16.603-5.292,16.603-16.537v-15.065c0-1.134,0.919-2.053,2.053-2.053h6.557c1.134,0,2.053-0.919,2.053-2.053v-3.137c0-1.134-0.919-2.053-2.053-2.053h-6.557c-1.134,0-2.053-0.919-2.053-2.053v-15.933c0-1.134,0.919-2.053,2.053-2.053h6.557c1.134,0,2.053-0.919,2.053-2.053v-3.137c0-1.134-0.919-2.053-2.053-2.053h-6.557c-1.134,0-2.053-0.919-2.053-2.053v-10.999C429.363,293.274,428.444,292.355,427.31,292.355z"/><path fill="#00A0FF" d="M443.648,373.092c0,1.134,0.919,2.053,2.053,2.053h23.138c10.239,0,18.569-7.94,18.569-17.7v-48.63c0-1.134-0.919-2.053-2.053-2.053h-39.654c-1.134,0-2.053,0.919-2.053,2.053V373.092z M468.839,367.902h-15.895c-1.134,0-2.053-0.919-2.053-2.053v-21.81c0-1.134,0.919-2.053,2.053-2.053h25.167c1.134,0,2.053,0.919,2.053,2.053v13.406C480.165,363.211,475.084,367.902,468.839,367.902z M480.165,316.059v16.631c0,1.134-0.919,2.053-2.053,2.053h-25.167c-1.134,0-2.053-0.919-2.053-2.053v-16.631c0-1.134,0.919-2.053,2.053-2.053h25.167C479.246,314.006,480.165,314.925,480.165,316.059z"/><path fill="#00A0FF" d="M475.171,292.301h-20.44c-1.134,0-2.053,0.919-2.053,2.053v3.137c0,1.134,0.919,2.053,2.053,2.053h20.44c1.134,0,2.053-0.919,2.053-2.053v-3.137C477.224,293.22,476.305,292.301,475.171,292.301z"/><path fill="#00A0FF" d="M553.303,295.487H510.73c-1.134,0-2.053,0.919-2.053,2.053v3.137c0,1.134,0.919,2.053,2.053,2.053h42.573c1.134,0,2.053-0.919,2.053-2.053v-3.137C555.356,296.406,554.437,295.487,553.303,295.487z"/><path fill="#00A0FF" d="M535.11,331.8h29.657c1.134,0,2.053-0.919,2.053-2.053v-3.137c0-1.134-0.919-2.053-2.053-2.053h-65.51c-1.134,0-2.053,0.919-2.053,2.053v3.137c0,1.134,0.919,2.053,2.053,2.053h20.274c1.638,0,2.617,1.824,1.711,3.189l-13.492,24.343c-0.363,0.545-0.632,1.08-0.821,1.633c-1.129,3.299-0.601,6.838,1.451,9.71c2.15,3.01,5.706,4.806,9.509,4.806h36.976c1.662,0,3.181-0.829,4.061-2.218c0.863-1.359,0.969-3.039,0.283-4.495l-8.586-16.643c-0.52-1.008-1.759-1.403-2.766-0.883l-2.788,1.439c-1.008,0.52-1.403,1.758-0.883,2.766l5.055,9.796c0.705,1.367-0.287,2.995-1.825,2.995h-29.528c-1.492,0-2.81-0.647-3.616-1.775c-0.367-0.512-0.899-1.53-0.589-2.798c0.052-0.212,0.157-0.413,0.278-0.596l16.397-28.72C531.416,332.757,533.199,331.8,535.11,331.8z"/></g></g></svg>
      <br />
      CDN by <a href="https://www.upyun.com/" targer="_blank">UpYun</a>
    </p>

    <p class="copyright">
      
        &copy; 2014 - 2019
        
        <a href="https://www.nervgeek.com" target="_blank">NERVGEEK</a>
        
        <br />
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>.
      <br />
      备案号: <a href="http://beian.miit.gov.cn" target="_blank">粤ICP备19082652号-1</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
        
        
        
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
        <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/css.min.js"></script>
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="/js/util.js"></script>
      <script src="/js/main.js"></script>
      <script src="/js/backToTop.js"></script>
      <script src="/js/randomSidebarVideo.js"></script>
    

    
      
        
      
    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

